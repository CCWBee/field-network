# =============================================================================
# Field Network - Production Environment Configuration
# =============================================================================
#
# Copy this file to .env and fill in the values for your production deployment.
# NEVER commit actual secrets to version control.
#
# For Railway deployment, set these in the Railway dashboard under
# Project -> Service -> Variables
# =============================================================================

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
# Railway provides this automatically when you add a PostgreSQL database
DATABASE_URL="postgresql://user:password@host:5432/database?schema=public"

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
# Generate with: openssl rand -hex 32
JWT_SECRET="your-32-byte-hex-secret-here"

# JWT token expiry (in seconds) - default 7 days
JWT_EXPIRES_IN="604800"

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
CORS_ORIGINS="https://field-network.com,https://www.field-network.com"

# -----------------------------------------------------------------------------
# Escrow Provider Configuration
# -----------------------------------------------------------------------------
# Options: "mock" (development) or "onchain" (production)
ESCROW_PROVIDER="onchain"

# Chain ID: 8453 (Base Mainnet) or 84532 (Base Sepolia Testnet)
CHAIN_ID="8453"

# Base RPC URL - use a reliable provider for production
# Public: https://mainnet.base.org
# Recommended: Alchemy, QuickNode, or Infura
BASE_RPC_URL="https://mainnet.base.org"

# Deployed escrow contract address (from deployment script output)
ESCROW_CONTRACT_ADDRESS="0x..."

# Operator wallet private key (used to sign escrow transactions)
# SECURITY: Generate a dedicated wallet for this. Never use your personal wallet.
# Generate with: node -e "console.log(require('ethers').Wallet.createRandom().privateKey)"
OPERATOR_PRIVATE_KEY="0x..."

# -----------------------------------------------------------------------------
# USDC Token Configuration
# -----------------------------------------------------------------------------
# Base Mainnet USDC: 0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913
# Base Sepolia USDC: 0x036CbD53842c5426634e7929541eC2318f3dCF7e
USDC_ADDRESS="0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913"

# -----------------------------------------------------------------------------
# Storage Provider Configuration
# -----------------------------------------------------------------------------
# Options: "local" (development) or "s3" (production)
STORAGE_PROVIDER="s3"

# S3-compatible storage (AWS S3, Cloudflare R2, MinIO, etc.)
S3_BUCKET="field-network-uploads"
S3_REGION="us-east-1"
S3_ACCESS_KEY_ID="your-access-key"
S3_SECRET_ACCESS_KEY="your-secret-key"

# For Cloudflare R2, use this endpoint format:
# S3_ENDPOINT="https://<account-id>.r2.cloudflarestorage.com"

# Signed URL expiry (in seconds) - default 1 hour
S3_SIGNED_URL_EXPIRY="3600"

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Requests per window per IP
RATE_LIMIT_MAX="100"

# Window duration in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS="900000"

# Enable trust proxy (required for Railway/Vercel to get real client IP)
TRUST_PROXY="true"

# -----------------------------------------------------------------------------
# Monitoring & Alerting (Optional)
# -----------------------------------------------------------------------------
# Webhook URL for critical alerts (Slack, Discord, PagerDuty, etc.)
ALERT_WEBHOOK_URL="https://hooks.slack.com/services/..."

# Minimum operator wallet balance before alerting (in ETH)
ALERT_MIN_OPERATOR_BALANCE="0.01"

# Email alerts (SMTP)
SMTP_HOST="smtp.example.com"
SMTP_PORT="587"
SMTP_USER="alerts@field-network.com"
SMTP_PASS="your-smtp-password"
ALERT_EMAIL_TO="oncall@field-network.com"

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Options: "debug", "info", "warn", "error"
LOG_LEVEL="info"

# JSON logging for production (easier to parse in log aggregators)
LOG_FORMAT="json"

# -----------------------------------------------------------------------------
# Error Tracking (Sentry)
# -----------------------------------------------------------------------------
# Get DSN from https://sentry.io
SENTRY_DSN="https://xxx@sentry.io/xxx"

# -----------------------------------------------------------------------------
# Feature Flags (Optional)
# -----------------------------------------------------------------------------
# Enable/disable features without code changes
FEATURE_DISPUTES_ENABLED="true"
FEATURE_BADGES_ENABLED="true"
FEATURE_NOTIFICATIONS_ENABLED="true"

# -----------------------------------------------------------------------------
# Frontend Configuration (Vercel)
# -----------------------------------------------------------------------------
# These are set in Vercel project settings, prefixed with NEXT_PUBLIC_

# NEXT_PUBLIC_API_URL="https://api.field-network.com"
# NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID="your-project-id"
# NEXT_PUBLIC_CHAIN_ID="8453"
# NEXT_PUBLIC_SENTRY_DSN="https://xxx@sentry.io/xxx"

# =============================================================================
# Deployment Checklist
# =============================================================================
#
# Before going live, verify:
#
# [ ] DATABASE_URL points to production PostgreSQL
# [ ] JWT_SECRET is unique and randomly generated
# [ ] CORS_ORIGINS matches your production domain(s)
# [ ] ESCROW_PROVIDER is "onchain"
# [ ] CHAIN_ID is 8453 (Base Mainnet)
# [ ] ESCROW_CONTRACT_ADDRESS is the deployed mainnet contract
# [ ] OPERATOR_PRIVATE_KEY is for a dedicated wallet with OPERATOR_ROLE
# [ ] Operator wallet has sufficient ETH for gas (~0.05 ETH)
# [ ] S3 bucket exists and credentials have proper permissions
# [ ] ALERT_WEBHOOK_URL is configured for production alerts
# [ ] All secrets are stored in Railway/Vercel, not in code
#
# =============================================================================
